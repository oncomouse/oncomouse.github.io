!function(a,b){"function"==typeof define&&define.amd?define(["exports"],b):"undefined"!=typeof exports?b(exports):b(a)}(this,function(a){function c(a){return b(a,48,57)}function d(a){return c(a)||b(a,65,70)||b(a,97,102)}function e(a){return b(a,65,90)}function f(a){return b(a,97,122)}function g(a){return e(a)||f(a)}function h(a){return a>=160}function i(a){return g(a)||h(a)||95==a}function j(a){return i(a)||c(a)||45==a}function k(a){return b(a,0,8)||b(a,14,31)||b(a,127,159)}function l(a){return 10==a||12==a}function m(a){return l(a)||9==a||32==a}function n(a){return l(a)||isNaN(a)}function p(a,b){void 0==b&&(b={transformFunctionWhitespace:!1,scientificNotation:!1});for(var h,p,e=-1,f=[],g="data",q=0,r=0,H=0,S=function(){q+=1,H=r,r=0},T={line:q,column:r},U=function(b){return void 0===b&&(b=1),a.charCodeAt(e+b)},V=function(b){return void 0===b&&(b=1),e+=b,h=a.charCodeAt(e),l(h)?S():r+=b,!0},W=function(){return e-=1,l(h)?(q-=1,r=H):r-=1,T.line=q,T.column=r,!0},X=function(){return e>=a.length},Y=function(){},Z=function(a){return a?a.finish():a=p.finish(),b.loc===!0&&(a.loc={},a.loc.start={line:T.line,column:T.column},T={line:q,column:r},a.loc.end=T),f.push(a),p=void 0,!0},$=function(a){return p=a,!0},_=function(){return console.log("Parse error at index "+e+", processing codepoint 0x"+h.toString(16)+" in state "+g+"."),!0},ab=function(a){return console.log("MAJOR SPEC ERROR: "+a),!0},bb=function(a){return g=a,!0},cb=function(){if(V(),d(h)){for(var a=[],b=0;6>b&&d(h);b++)a.push(h),V();var c=parseInt(a.map(String.fromCharCode).join(""),16);return c>o&&(c=65533),m(h)||W(),c}return h};;){if(e>2*a.length)return"I'm infinite-looping!";switch(V(),g){case"data":if(m(h))for(Z(new u);m(U());)V();else if(34==h)bb("double-quote-string");else if(35==h)bb("hash");else if(39==h)bb("single-quote-string");else if(40==h)Z(new D);else if(41==h)Z(new E);else if(43==h)c(U())||46==U()&&c(U(2))?bb("number")&&W():Z(new G(h));else if(45==h)45==U(1)&&62==U(2)?V(2)&&Z(new w):c(U())||46==U(1)&&c(U(2))?bb("number")&&W():bb("ident")&&W();else if(46==h)c(U())?bb("number")&&W():Z(new G(h));else if(47==h)42==U()?V()&&bb("comment"):Z(new G(h));else if(58==h)Z(new x);else if(59==h)Z(new y);else if(60==h)33==U(1)&&45==U(2)&&45==U(3)?V(3)&&Z(new v):Z(new G(h));else if(64==h)bb("at-keyword");else if(91==h)Z(new B);else if(92==h)n(U())?_()&&Z(new G(h)):bb("ident")&&W();else if(93==h)Z(new C);else if(123==h)Z(new z);else if(125==h)Z(new A);else if(c(h))bb("number")&&W();else if(85==h||117==h)43==U(1)&&d(U(2))?V()&&bb("unicode-range"):bb("ident")&&W();else if(i(h))bb("ident")&&W();else{if(X())return Z(new F),f;Z(new G(h))}break;case"double-quote-string":void 0==p&&$(new M),34==h?Z()&&bb("data"):X()?_()&&Z()&&bb("data")&&W():l(h)?_()&&Z(new s)&&bb("data")&&W():92==h?n(U())?_()&&Z(new s)&&bb("data"):l(U())?V():p.append(cb()):p.append(h);break;case"single-quote-string":void 0==p&&$(new M),39==h?Z()&&bb("data"):X()?_()&&Z()&&bb("data"):l(h)?_()&&Z(new s)&&bb("data")&&W():92==h?n(U())?_()&&Z(new s)&&bb("data"):l(U())?V():p.append(cb()):p.append(h);break;case"hash":j(h)?$(new L(h))&&bb("hash-rest"):92==h?n(U())?_()&&Z(new G(35))&&bb("data")&&W():$(new L(cb()))&&bb("hash-rest"):Z(new G(35))&&bb("data")&&W();break;case"hash-rest":j(h)?p.append(h):92==h?n(U())?_()&&Z()&&bb("data")&&W():p.append(cb()):Z()&&bb("data")&&W();break;case"comment":42==h?47==U()?V()&&bb("data"):Y():X()?_()&&bb("data")&&W():Y();break;case"at-keyword":45==h?i(U())?$(new K(45))&&bb("at-keyword-rest"):92!=U(1)||n(U(2))?_()&&Z(new G(64))&&bb("data")&&W():$(new AtKeywordtoken(45))&&bb("at-keyword-rest"):i(h)?$(new K(h))&&bb("at-keyword-rest"):92==h?n(U())?_()&&Z(new G(35))&&bb("data")&&W():$(new K(cb()))&&bb("at-keyword-rest"):Z(new G(64))&&bb("data")&&W();break;case"at-keyword-rest":j(h)?p.append(h):92==h?n(U())?_()&&Z()&&bb("data")&&W():p.append(cb()):Z()&&bb("data")&&W();break;case"ident":45==h?i(U())?$(new I(h))&&bb("ident-rest"):92!=U(1)||n(U(2))?Z(new G(45))&&bb("data"):$(new I(h))&&bb("ident-rest"):i(h)?$(new I(h))&&bb("ident-rest"):92==h?n(U())?_()&&bb("data")&&W():$(new I(cb()))&&bb("ident-rest"):ab("Hit the generic 'else' clause in ident state.")&&bb("data")&&W();break;case"ident-rest":j(h)?p.append(h):92==h?n(U())?_()&&Z()&&bb("data")&&W():p.append(cb()):40==h?p.ASCIImatch("url")?bb("url"):Z(new J(p))&&bb("data"):m(h)&&b.transformFunctionWhitespace?bb("transform-function-whitespace")&&W():Z()&&bb("data")&&W();break;case"transform-function-whitespace":m(U())?Y():40==h?Z(new J(p))&&bb("data"):Z()&&bb("data")&&W();break;case"number":$(new O),45==h?c(U())?V()&&p.append([45,h])&&bb("number-rest"):46==U(1)&&c(U(2))?V(2)&&p.append([45,46,h])&&bb("number-fraction"):bb("data")&&W():43==h?c(U())?V()&&p.append([43,h])&&bb("number-rest"):46==U(1)&&c(U(2))?V(2)&&p.append([43,46,h])&&bb("number-fraction"):bb("data")&&W():c(h)?p.append(h)&&bb("number-rest"):46==h?c(U())?V()&&p.append([46,h])&&bb("number-fraction"):bb("data")&&W():bb("data")&&W();break;case"number-rest":c(h)?p.append(h):46==h?c(U())?V()&&p.append([46,h])&&bb("number-fraction"):Z()&&bb("data")&&W():37==h?Z(new P(p))&&bb("data"):69==h||101==h?c(U())?V()&&p.append([37,h])&&bb("sci-notation"):43!=U(1)&&45!=U(1)||!c(U(2))?$(new Q(p,h))&&bb("dimension"):p.append([37,U(1),U(2)])&&V(2)&&bb("sci-notation"):45==h?i(U())?V()&&$(new Q(p,[45,h]))&&bb("dimension"):92==U(1)&&n(U(2))?_()&&Z()&&bb("data")&&W():92==U(1)?V()&&$(new Q(p,[45,cb()]))&&bb("dimension"):Z()&&bb("data")&&W():i(h)?$(new Q(p,h))&&bb("dimension"):92==h?n(U)?_()&&Z()&&bb("data")&&W():$(new Q(p,cb))&&bb("dimension"):Z()&&bb("data")&&W();break;case"number-fraction":p.type="number",c(h)?p.append(h):37==h?Z(new P(p))&&bb("data"):69==h||101==h?c(U())?V()&&p.append([101,h])&&bb("sci-notation"):43!=U(1)&&45!=U(1)||!c(U(2))?$(new Q(p,h))&&bb("dimension"):p.append([101,U(1),U(2)])&&V(2)&&bb("sci-notation"):45==h?i(U())?V()&&$(new Q(p,[45,h]))&&bb("dimension"):92==U(1)&&n(U(2))?_()&&Z()&&bb("data")&&W():92==U(1)?V()&&$(new Q(p,[45,cb()]))&&bb("dimension"):Z()&&bb("data")&&W():i(h)?$(new Q(p,h))&&bb("dimension"):92==h?n(U)?_()&&Z()&&bb("data")&&W():$(new Q(p,cb()))&&bb("dimension"):Z()&&bb("data")&&W();break;case"dimension":j(h)?p.append(h):92==h?n(U())?_()&&Z()&&bb("data")&&W():p.append(cb()):Z()&&bb("data")&&W();break;case"sci-notation":p.type="number",c(h)?p.append(h):Z()&&bb("data")&&W();break;case"url":X()?_()&&Z(new t)&&bb("data"):34==h?bb("url-double-quote"):39==h?bb("url-single-quote"):41==h?Z(new N)&&bb("data"):m(h)?Y():bb("url-unquoted")&&W();break;case"url-double-quote":p instanceof N||$(new N),X()?_()&&Z(new t)&&bb("data"):34==h?bb("url-end"):l(h)?_()&&bb("bad-url"):92==h?l(U())?V():n(U())?_()&&Z(new t)&&bb("data")&&W():p.append(cb()):p.append(h);break;case"url-single-quote":p instanceof N||$(new N),X()?_()&&Z(new t)&&bb("data"):39==h?bb("url-end"):l(h)?_()&&bb("bad-url"):92==h?l(U())?V():n(U())?_()&&Z(new t)&&bb("data")&&W():p.append(cb()):p.append(h);break;case"url-end":X()?_()&&Z(new t)&&bb("data"):m(h)?Y():41==h?Z()&&bb("data"):_()&&bb("bad-url")&&W();break;case"url-unquoted":p instanceof N||$(new N),X()?_()&&Z(new t)&&bb("data"):m(h)?bb("url-end"):41==h?Z()&&bb("data"):34==h||39==h||40==h||k(h)?_()&&bb("bad-url"):92==h?n(U())?_()&&bb("bad-url"):p.append(cb()):p.append(h);break;case"bad-url":X()?_()&&Z(new t)&&bb("data"):41==h?Z(new t)&&bb("data"):92==h?n(U())?Y():cb():Y();break;case"unicode-range":for(var db=[h],eb=[h],fb=1;6>fb&&d(U());fb++)V(),db.push(h),eb.push(h);if(63==U()){for(;6>fb&&63==U();fb++)V(),db.push("0".charCodeAt(0)),eb.push("f".charCodeAt(0));Z(new R(db,eb))&&bb("data")}else if(45==U(1)&&d(U(2))){V(),V(),eb=[h];for(var fb=1;6>fb&&d(U());fb++)V(),eb.push(h);Z(new R(db,eb))&&bb("data")}else Z(new R(db))&&bb("data");break;default:ab("Unknown state '"+g+"'")}}}function q(a){return String.fromCharCode.apply(null,a.filter(function(a){return a}))}function r(){return this}function s(){return this}function t(){return this}function u(){return this}function v(){return this}function w(){return this}function x(){return this}function y(){return this}function z(){return this}function A(){return this}function B(){return this}function C(){return this}function D(){return this}function E(){return this}function F(){return this}function G(a){return this.value=String.fromCharCode(a),this}function H(){return this}function I(a){this.value=[],this.append(a)}function J(a){this.value=a.finish().value}function K(a){this.value=[],this.append(a)}function L(a){this.value=[],this.append(a)}function M(a){this.value=[],this.append(a)}function N(a){this.value=[],this.append(a)}function O(a){this.value=[],this.append(a),this.type="integer"}function P(a){a.finish(),this.value=a.value,this.repr=a.repr}function Q(a,b){a.finish(),this.num=a.value,this.unit=[],this.repr=a.repr,this.append(b)}function R(a,b){return a=parseInt(q(a),16),b=void 0===b?a+1:parseInt(q(b),16),a>o&&(b=a),a>b&&(b=a),b>o&&(b=o),this.start=a,this.end=b,this}var b=function(a,b,c){return a>=b&&c>=a},o=1114111;r.prototype.finish=function(){return this},r.prototype.toString=function(){return this.tokenType},r.prototype.toSourceString=r.prototype.toString,r.prototype.toJSON=function(){return this.toString()},s.prototype=new r,s.prototype.tokenType="BADSTRING",t.prototype=new r,t.prototype.tokenType="BADURL",u.prototype=new r,u.prototype.tokenType="WHITESPACE",u.prototype.toString=function(){return"WS"},u.prototype.toSourceString=function(){return" "},v.prototype=new r,v.prototype.tokenType="CDO",w.prototype=new r,w.prototype.tokenType="CDC",x.prototype=new r,x.prototype.tokenType=":",y.prototype=new r,y.prototype.tokenType=";",z.prototype=new r,z.prototype.tokenType="{",A.prototype=new r,A.prototype.tokenType="}",B.prototype=new r,B.prototype.tokenType="[",C.prototype=new r,C.prototype.tokenType="]",D.prototype=new r,D.prototype.tokenType="(",E.prototype=new r,E.prototype.tokenType=")",F.prototype=new r,F.prototype.tokenType="EOF",G.prototype=new r,G.prototype.tokenType="DELIM",G.prototype.toString=function(){return"DELIM("+this.value+")"},G.prototype.toSourceString=function(){return this.value},H.prototype=new r,H.prototype.append=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.value.push(a[b]);else this.value.push(a);return!0},H.prototype.finish=function(){return this.value=this.valueAsString(),this},H.prototype.ASCIImatch=function(a){return this.valueAsString().toLowerCase()==a.toLowerCase()},H.prototype.valueAsString=function(){return"string"==typeof this.value?this.value:q(this.value)},H.prototype.valueAsCodes=function(){if("string"==typeof this.value){for(var a=[],b=0;b<this.value.length;b++)a.push(this.value.charCodeAt(b));return a}return this.value.filter(function(a){return a})},I.prototype=new H,I.prototype.tokenType="IDENT",I.prototype.toString=function(){return"IDENT("+this.value+")"},I.prototype.toSourceString=function(){return this.value},J.prototype=new H,J.prototype.tokenType="FUNCTION",J.prototype.toString=function(){return"FUNCTION("+this.value+")"},J.prototype.toSourceString=function(){return this.value},K.prototype=new H,K.prototype.tokenType="AT-KEYWORD",K.prototype.toString=function(){return"AT("+this.value+")"},K.prototype.toSourceString=function(){return"@"+this.value},L.prototype=new H,L.prototype.tokenType="HASH",L.prototype.toString=function(){return"HASH("+this.value+")"},L.prototype.toSourceString=function(){return"#"+this.value},M.prototype=new H,M.prototype.tokenType="STRING",M.prototype.toString=function(){return'"'+this.value+'"'},M.prototype.toSourceString=M.prototype.toString,N.prototype=new H,N.prototype.tokenType="URL",N.prototype.toString=function(){return"URL("+this.value+")"},N.prototype.toSourceString=function(){return"url('"+this.value+"')"},O.prototype=new H,O.prototype.tokenType="NUMBER",O.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},O.prototype.toSourceString=function(){return"integer"==this.type?this.value:this.value},O.prototype.finish=function(){return this.repr=this.valueAsString(),this.value=1*this.repr,0!=Math.abs(this.value)%1&&(this.type="number"),this},P.prototype=new r,P.prototype.tokenType="PERCENTAGE",P.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},P.prototype.toSourceString=function(){return this.value+"%"},Q.prototype=new r,Q.prototype.tokenType="DIMENSION",Q.prototype.toString=function(){return"DIM("+this.num+","+this.unit+")"},Q.prototype.toSourceString=function(){return this.num+this.unit},Q.prototype.append=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.unit.push(a[b]);else this.unit.push(a);return!0},Q.prototype.finish=function(){return this.unit=q(this.unit),this.repr+=this.unit,this},R.prototype=new r,R.prototype.tokenType="UNICODE-RANGE",R.prototype.toString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},R.prototype.toSourceString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},R.prototype.contains=function(a){return a>=this.start&&a<this.end},a.tokenize=p}),function(a,b){"function"==typeof define&&define.amd?define(["exports"],b):"undefined"!=typeof exports?b(exports):b(a)}(this,function(a){function b(a){function x(){switch(k.tokenType){case"(":case"[":case"{":return y();case"FUNCTION":return z();default:return k}}function y(){for(var a={"(":")","[":"]","{":"}"}[k.tokenType],b=new h(k.tokenType);;)switch(o(),k.tokenType){case"EOF":case a:return b;default:b.append(x())}}function z(){for(var a=new i(k.value),b=new j;;)switch(o(),k.tokenType){case"EOF":case")":return a.append(b),a;case"DELIM":","==k.value?(a.append(b),b=new j):b.append(k);break;default:b.append(x())}}for(var k,b="top-level",c=-1,l=new d,m=[l],n=m[0],o=function(b){return void 0===b&&(b=1),c+=b,k=c<a.length?a[c]:new EOFToken,!0},p=function(){return c--,!0},q=function(){return a[c+1]},r=function(a){return void 0===a?""!==n.fillType?b=n.fillType:"STYLESHEET"==n.type?b="top-level":(console.log("Unknown rule-type while switching to current rule's content mode: ",n),b=""):b=a,!0},s=function(a){return n=a,m.push(n),!0},t=function(a){return console.log("Parse error at token "+c+": "+k+".\n"+a),!0},u=function(){var a=m.pop();return n=m[m.length-1],n.append(a),!0},v=function(){return m.pop(),n=m[m.length-1],!0},w=function(){for(;m.length>1;)u()};;)if(o(),"DELIM"!==k.tokenType||"\r"!==k.value)switch(b){case"top-level":switch(k.tokenType){case"CDO":case"CDC":case"WHITESPACE":break;case"AT-KEYWORD":s(new e(k.value))&&r("at-rule");break;case"{":t("Attempt to open a curly-block at top-level.")&&x();break;case"EOF":return w(),l;default:s(new f)&&r("selector")&&p()}break;case"at-rule":switch(k.tokenType){case";":u()&&r();break;case"{":""!==n.fillType?r(n.fillType):t("Attempt to open a curly-block in a statement-type at-rule.")&&v()&&r("next-block")&&p();break;case"EOF":return w(),l;default:n.appendPrelude(x())}break;case"rule":switch(k.tokenType){case"WHITESPACE":break;case"}":u()&&r();break;case"AT-KEYWORD":s(new e(k.value))&&r("at-rule");break;case"EOF":return w(),l;default:s(new f)&&r("selector")&&p()}break;case"selector":switch(k.tokenType){case"{":r("declaration");break;case"EOF":return v()&&w(),l;default:n.appendSelector(x())}break;case"declaration":switch(k.tokenType){case"WHITESPACE":case";":break;case"}":u()&&r();break;case"AT-RULE":s(new e(k.value))&&r("at-rule");break;case"IDENT":s(new g(k.value))&&r("after-declaration-name");break;case"EOF":return w(),l;default:t()&&v()&&r("next-declaration")}break;case"after-declaration-name":switch(k.tokenType){case"WHITESPACE":break;case":":r("declaration-value");break;case";":t("Incomplete declaration - semicolon after property name.")&&v()&&r();break;case"EOF":return v()&&w(),l;default:t("Invalid declaration - additional token after property name")&&v()&&r("next-declaration")}break;case"declaration-value":switch(k.tokenType){case"DELIM":"!"==k.value&&"IDENTIFIER"==q().tokenType&&"important"==q().value.toLowerCase()?(o(),n.important=!0,r("declaration-end")):n.append(k);break;case";":u()&&r();break;case"}":u()&&u()&&r();break;case"EOF":return w(),l;default:n.append(x())}break;case"declaration-end":switch(k.tokenType){case"WHITESPACE":break;case";":u()&&r();break;case"}":u()&&u()&&r();break;case"EOF":return w(),l;default:t("Invalid declaration - additional token after !important.")&&v()&&r("next-declaration")}break;case"next-block":switch(k.tokenType){case"{":x()&&r();break;case"EOF":return w(),l;default:x()}break;case"next-declaration":switch(k.tokenType){case";":r("declaration");break;case"}":r("declaration")&&p();break;case"EOF":return w(),l;default:x()}break;default:return console.log("Unknown parsing mode: "+b),void 0}}function c(){return this}function d(){return this.value=[],this}function e(a){return this.name=a,this.prelude=[],this.value=[],a in e.registry&&(this.fillType=e.registry[a]),this}function f(){return this.selector=[],this.value=[],this}function g(a){return this.name=a,this.value=[],this}function h(a){return this.name=a,this.value=[],this}function i(a){return this.name=a,this.value=[],this}function j(){return this.value=[],this}c.prototype.fillType="",c.prototype.toString=function(a){return JSON.stringify(this.toJSON(),null,a)},c.prototype.append=function(a){return this.value.push(a),this},d.prototype=new c,d.prototype.type="STYLESHEET",d.prototype.toJSON=function(){return{type:"stylesheet",value:this.value.map(function(a){return a.toJSON()})}},e.prototype=new c,e.prototype.type="AT-RULE",e.prototype.appendPrelude=function(a){return this.prelude.push(a),this},e.prototype.toJSON=function(){return{type:"at",name:this.name,prelude:this.prelude.map(function(a){return a.toJSON()}),value:this.value.map(function(a){return a.toJSON()})}},e.registry={"import":"",media:"rule","font-face":"declaration",page:"declaration",keyframes:"rule",namespace:"","counter-style":"declaration",supports:"rule",document:"rule","font-feature-values":"declaration",viewport:"","region-style":"rule"},f.prototype=new c,f.prototype.type="STYLE-RULE",f.prototype.fillType="declaration",f.prototype.appendSelector=function(a){return this.selector.push(a),this},f.prototype.toJSON=function(){return{type:"selector",selector:this.selector.map(function(a){return a.toJSON()}),value:this.value.map(function(a){return a.toJSON()})}},g.prototype=new c,g.prototype.type="DECLARATION",g.prototype.toJSON=function(){return{type:"declaration",name:this.name,value:this.value.map(function(a){return a.toJSON()})}},h.prototype=new c,h.prototype.type="BLOCK",h.prototype.toJSON=function(){return{type:"block",name:this.name,value:this.value.map(function(a){return a.toJSON()})}},i.prototype=new c,i.prototype.type="FUNCTION",i.prototype.toJSON=function(){return{type:"func",name:this.name,value:this.value.map(function(a){return a.toJSON()})}},j.prototype=new c,j.prototype.type="FUNCTION-ARG",j.prototype.toJSON=function(){return this.value.map(function(a){return a.toJSON()})},a.parse=b}),function(){var a,b,c,d,e;a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],c=function(){var b,c,d;for(d=!1,c=0;c<a.length;){try{d=a[c++]()}catch(e){b=e;continue}break}return d},b=function(a,b){var d;d=c(),d.onreadystatechange=function(){if(4===d.readyState){if(200!==d.status)throw"Error!";b(d.responseText)}},d.open("GET",a,!0),d.send()},d=function(){var a,b;return a=0,b=0,window.innerHeight?(a=window.innerWidth,b=window.innerHeight):document.documentElement&&document.documentElement.clientHeight?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):document.body&&(a=document.body.clientWidth,b=document.body.clientHeight),{width:a,height:b}},e=function(){var a,c,e,f,g,h,i,j,k,l,m,n;for(a=function(a){var b,c,d,e,f,g,h,i,j,k;for(c=[],j=a.value,f=0,h=j.length;h>f;f++){for(b=j[f],d=!1,k=b.value,g=0,i=k.length;i>g;g++)e=k[g],"DIMENSION"!==e.tokenType||"vmin"!==e.unit&&"vh"!==e.unit&&"vw"!==e.unit||(d=!0);d&&c.push(b)}return a.value=c,c},c=function(b){var d,e,f,g,h,i,j;for(g=[],j=b.value,h=0,i=j.length;i>h;h++)switch(f=j[h],f.type){case"STYLE-RULE":e=a(f),0!==e.length&&g.push(f);break;case"AT-RULE":d=c(f),0!==d.length&&g.push(f)}return b.value=g,g},i=function(){var a,b,c,e,f,g,h,i,j;j=d(),b={vh:j.height/100,vw:j.width/100},b.vmin=Math.min(b.vh,b.vw),i=j.width/j.height,f=function(a,b){var c,d,e,f;if(null!=a.map)return a.map(b);for(c=[],e=0,f=a.length;f>e;e++)d=a[e],c.push(b(d));return c},c=function(a){var c,d,e,g,h,i,j,k,l,m;for(d=[],e=f(a.selector,function(a){return null!=a.toSourceString?a.toSourceString():""}).join(""),e+="{",l=a.value,h=0,j=l.length;j>h;h++){for(c=l[h],e+=c.name,e+=":",m=c.value,i=0,k=m.length;k>i;i++)g=m[i],e+="DIMENSION"!==g.tokenType||"vmin"!==g.unit&&"vh"!==g.unit&&"vw"!==g.unit?g.toSourceString():""+Math.floor(g.num*b[g.unit])+"px";e+=";"}return e+="}\r"},e=function(a){var b,d,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(j="",v=a.value,n=0,r=v.length;r>n;n++)switch(h=v[n],h.type){case"STYLE-RULE":j+=c(h);break;case"AT-RULE":if("media"===h.name){for(g="",b=!1,d=[],w=h.prelude,o=0,s=w.length;s>o;o++)if(l=w[o],"("===l.name){for(g+="(",x=l.value,p=0,t=x.length;t>p;p++)m=x[p],k=null!=m.toSourceString?m.toSourceString():"","IDENT"===m.tokenType&&"max-aspect-ratio"===k&&(b=!0),"NUMBER"===m.tokenType&&d.push(parseInt(k)),g+=k;g+=")"}else g+=l.toSourceString();i<d[0]/d[1]&&(j+=e(h))}else{for(g="",y=h.prelude,q=0,u=y.length;u>q;q++)l=y[q],"("===l.name?(g+="(",g+=f(l.value,function(a){return null!=a.toSourceString?a.toSourceString():""}).join(""),g+=")"):g+=l.toSourceString();j+="@"+h.name+" "+g+" {",j+=e(h),j+="}\n"}}return j},a="";for(h in k)g=k[h],a+=e(g);return null!=l.styleSheet?l.styleSheet.cssText=a:l.innerHTML=a},k={},l=document.createElement("style"),e=document.getElementsByTagName("head")[0],e.appendChild(l),h=document.getElementsByTagName("link"),g=0,j=0,m=0,n=h.length;n>m;m++)f=h[m],"stylesheet"===f.rel&&(g++,b(f.href,function(a){var b,d;d=tokenize(a),b=parse(d),c(b),k[f.href]=b,j++,j===g&&window.onresize()}));window.onresize=i},e()}.call(this);
